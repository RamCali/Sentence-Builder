[
    {
      "image": "example-dog-house.png",
      "sentence": ["The", "dog", "is", "sleeping", "under", "the", "bed."],
      "placeholders": [1, 3],
      "words": ["dog", "sleeping"]
    },
    {
      "image": "example-cat-tree.png",
      "sentence": ["The", "cat", "is", "sitting", "on", "the", "tree."],
      "placeholders": [1, 3],
      "words": ["cat", "sitting"]
    }
  ]
  async function loadGame() {
    const response = await fetch('data.json');
    activities = await response.json();

    // Load the first activity
    loadActivity(currentActivityIndex);
}

function loadActivity(index) {
  const activity = activities[index];

  // Set the image
  const imageElement = document.querySelector('.image img');
  imageElement.src = activity.image;

  // Create the sentence with placeholders
  const sentenceContainer = document.querySelector('.sentence');
  sentenceContainer.innerHTML = ''; // Clear existing content

  activity.sentence.forEach((word, idx) => {
      if (activity.placeholders.includes(idx)) {
          const placeholder = document.createElement('span');
          placeholder.classList.add('placeholder');
          placeholder.dataset.word = word;
          sentenceContainer.appendChild(placeholder);
      } else {
          const text = document.createElement('span');
          text.textContent = word + ' ';
          sentenceContainer.appendChild(text);
      }
  });

  // Create the draggable words
  const wordsContainer = document.querySelector('.words');
  wordsContainer.innerHTML = ''; // Clear existing content

  activity.words.forEach(word => {
      const wordElement = document.createElement('span');
      wordElement.classList.add('word');
      wordElement.textContent = word;
      wordElement.setAttribute('draggable', 'true');
      wordElement.dataset.word = word;
      wordsContainer.appendChild(wordElement);
  });

  // Hide the "Next" button until the activity is completed
  document.getElementById('next-button').style.display = 'none';

  addDragAndDropListeners();
}

function checkCompletion() {
  const placeholders = document.querySelectorAll('.placeholder');
  const completed = Array.from(placeholders).every(placeholder => placeholder.textContent.trim() !== '');
  const message = document.getElementById('message');
  const nextButton = document.getElementById('next-button');

  if (completed) {
      message.textContent = 'Great job! You completed the sentence!';
      showConfetti();

      // Show the Next button
      nextButton.style.display = 'inline-block';
  }
}

document.getElementById('next-button').addEventListener('click', () => {
  currentActivityIndex++;

  if (currentActivityIndex < activities.length) {
      loadActivity(currentActivityIndex);
      document.getElementById('message').textContent = ''; // Clear the message
  } else {
      // No more activities
      document.getElementById('message').textContent = 'You have completed all activities!';
      document.getElementById('next-button').style.display = 'none';
  }
});